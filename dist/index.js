"use strict";(()=>{var T=async()=>{let l=1,u=[],d=[],s=[],c=[],m=[{name:"department",options:["All Departments"]},{name:"location",options:["All Locations"]}],H=["department","title","location","content"],r=document.querySelector('[tc-greenhouse-element="main"]'),p=r?.querySelector('[tc-greenhouse-element="list"]'),E=p?.querySelector('[tc-greenhouse-element="list-item"]');if(!r||!p||!E)return;let y=r?.querySelector('[tc-greenhouse-element="error"]');y.remove();let b=r?.querySelectorAll('[tc-greenhouse-element="search"]')[0];b&&b.addEventListener("input",t=>A(t.target.value));let w=r.getAttribute("tc-greenhouse-paginate")==="true";w?P():j();let k=!!r.querySelector('[tc-greenhouse-content-search="true"]'),i=Number(r.querySelector("[tc-greenhouse-results-per-page]")?.getAttribute("tc-greenhouse-results-per-page"))||3;console.log(r.querySelector("[tc-greenhouse-results-per-page]")?.getAttribute("tc-greenhouse-results-per-page"));let S=r?.querySelector('[tc-greenhouse-element="loader"]'),M=r.parentElement,D=r.style.display;r.style.display="none",M.appendChild(S);let C=await B();if(M.removeChild(S),C instanceof Error)return q();r.style.display=D,_();function q(){r.innerHTML="",y&&r.appendChild(y),r.style.display=D}function g(){if(!E)return;let t=[];c.forEach(e=>{let n=E.cloneNode(!0);H.forEach(a=>{n.querySelectorAll(`[tc-greenhouse-element="${a}"]`).forEach(o=>{a==="location"?o.innerHTML=e.location.name:a==="department"?o.innerHTML=e.departments[0].name:o.textContent=e[a]})}),t.push(n)}),p.innerHTML="",p?.append(...t)}function L(){s&&(console.log("current_page",l),w?(c=s.slice((l-1)*i,l*i),console.log("paginatedData",c)):c.length?c=s.slice(0,i*l):c=s.slice((l-1)*i,l*i),g())}function A(t){u&&(console.log(t.trim()),t.trim()?(d.length||(d=s),s=d.filter(e=>e.title.trim().toLowerCase().includes(t.trim().toLowerCase()))):(s=d,d=[]),L())}function j(){let t=r?.querySelector('[tc-greenhouse-element="load-more"]');console.log(t),t?.addEventListener("click",x)}function x(){if(l<Math.ceil(s.length/i)){l++;let t=s.slice((l-1)*i,l*i);c=c.concat(t),g()}}function P(){let t=document.getElementsByClassName("wf-next")[0],e=document.getElementsByClassName("wf-previous")[0];t?.addEventListener("click",N),e?.addEventListener("click",I)}function I(){l>1&&(l--,c=s.slice((l-1)*i,l*i),g()),p?.scrollIntoView({behavior:"smooth"})}function N(){l<Math.ceil(s.length/i)&&(l++,c=s.slice((l-1)*i,l*i),g()),p?.scrollIntoView({behavior:"smooth"})}function _(){let t=m.map(n=>n.name);if(!u)return;u.forEach(n=>{let a=m[0].options.map(v=>v),o=m[1].options.map(v=>v),f=n.departments[0].name,h=n.location.name;a.includes(f)||m[0].options.push(n.departments[0].name),o.includes(h)||m[1].options.push(n.location.name)});let e=r?.querySelectorAll("[tc-greenhouse-filter]");console.log(e,"filterElements"),e?.length&&e.forEach(n=>{let a=n.getAttribute("tc-greenhouse-filter");if(t.includes(a)){let o=m.find(f=>f.name===a)?.options;o?.length&&o.forEach(f=>{let h=document.createElement("option");h.value=f,h.textContent=f,n.appendChild(h)})}n.onchange=o=>{F(o)}})}function F(t){if(!u)return;console.log(t.target);let e=document.querySelector('[tc-greenhouse-filter="location"]'),n=document.querySelector('[tc-greenhouse-filter="department"]'),a=[];e?.value&&n?.value&&(e.value==="All Locations"&&n.value==="All Departments"?a=u:e.value==="All Locations"?u.forEach(o=>{o.departments[0].name===n.value&&a.push(o)}):n.value==="All Departments"?u.forEach(o=>{o.location.name===e.value&&a.push(o)}):u.forEach(o=>{o.departments[0].name===n.value&&o.location.name===e.value&&a.push(o)})),console.log(a.length),s=a,l=1,L()}async function B(){await new Promise(e=>setTimeout(e,2e3));let t=[];try{let e=await fetch("https://boards-api.greenhouse.io/v1/boards/mural/jobs?content=true",{method:"GET"}).then(n=>n.json());if(!e.jobs)throw new Error("No jobs found");t=e.jobs}catch(e){return e}u=t,s=t,L()}};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{T()});})();
