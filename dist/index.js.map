{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/utils/greenhouse.ts", "../src/index.ts"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\r\n", "\r\n\r\nexport const greenhouse = async () => {\r\n  let results_per_page = 3;\r\n  let current_page = 1;\r\n\r\n  let apiData: job[] = [] // all data from api response\r\n  let dataStore: job[] = []\r\n  let filteredData: undefined | null | job[] // all data with filters/search applied\r\n\r\n  let paginatedData: job[] = [] // paginated data\r\n\r\n  let filters: filter[] = [{\r\n    name: 'department',\r\n    options: ['All Departments']\r\n  }, {\r\n    name: 'location',\r\n    options: ['All Locations']\r\n  }]\r\n\r\n  // components required\r\n  let mainElement: Element | undefined\r\n  let list: Element | undefined\r\n  let listElement: Element | undefined\r\n  let searchElement: HTMLInputElement | undefined\r\n\r\n  let paginate: boolean = false\r\n\r\n  let REQUIRED_FIELDS = ['department', 'title', 'location', 'content']\r\n\r\n\r\n  // settings\r\n  // paginate = \r\n\r\n  // Getting all the required elements\r\n  mainElement = document.querySelectorAll('[tc-greenhouse-element=\"main\"]')[0];\r\n  list = mainElement?.querySelectorAll('[tc-greenhouse-element=\"list\"]')[0];\r\n  listElement = list?.querySelectorAll('[tc-greenhouse-element=\"list-item\"]')[0];\r\n  searchElement = mainElement?.querySelectorAll('[tc-greenhouse-element=\"search\"]')[0] as HTMLInputElement;\r\n\r\n  // @ts-ignore\r\n  searchElement.addEventListener('input', e => handleInputChange(e.target.value))\r\n\r\n\r\n  if (!mainElement || !list || !listElement) return\r\n\r\n  // add on click on next and previous buttons\r\n  const nextButton = document.getElementsByClassName('wf-next')[0]\r\n  const previousButton = document.getElementsByClassName('wf-previous')[0]\r\n\r\n  nextButton.addEventListener('click', handleNext)\r\n  previousButton.addEventListener('click', handlePrevious)\r\n\r\n  await getDataFromGreenhouseAPI()\r\n  setFilters()\r\n  \r\n  function renderList() {\r\n    if (!listElement) return\r\n\r\n    let items: HTMLElement[] = []\r\n\r\n    // creating list of elements\r\n    paginatedData.forEach(item => {\r\n      let newElement = listElement!.cloneNode(true) as HTMLElement\r\n\r\n      newElement.style.display = 'flex'\r\n      newElement.style.opacity = '1'\r\n      REQUIRED_FIELDS.forEach(field => {\r\n        // find all elements of the current field\r\n        newElement.querySelectorAll(`[tc-greenhouse-element=\"${field}\"]`).forEach(element => {\r\n          // replacing with actual data\r\n          if (field === 'location') {\r\n            element.innerHTML = item.location.name\r\n          } else {\r\n            element.textContent = item[field as keyof job]\r\n          }\r\n        })\r\n      })\r\n      items.push(newElement)\r\n    })\r\n\r\n    // clearing current list of elements\r\n    list!.innerHTML = ''\r\n    list?.append(...items)\r\n  }\r\n\r\n  function setCurrentPageData() {\r\n    if (!filteredData) return\r\n    console.log(\"current_page\", current_page)\r\n    paginatedData = filteredData.slice((current_page - 1) * results_per_page, current_page * results_per_page)\r\n    console.log(\"paginatedData\", paginatedData)\r\n    renderList()\r\n  }\r\n\r\n  function handleInputChange(value: string) {\r\n    if (!filteredData) return\r\n    console.log(value.trim())\r\n    if (!value.trim()) {\r\n      filteredData = apiData\r\n    } else {\r\n      filteredData = filteredData.filter(item => {\r\n        console.log(item.title.trim().toLowerCase().includes(value.trim().toLowerCase()))\r\n        return item.title.trim().toLowerCase().includes(value.trim().toLowerCase())\r\n        // ||\r\n        //   item.content.toLowerCase().includes(value.toLowerCase())\r\n      })\r\n    }\r\n    setCurrentPageData()\r\n  }\r\n\r\n  function handlePrevious() {\r\n    if (current_page > 1) {\r\n      current_page--\r\n      paginatedData = filteredData!.slice((current_page - 1) * results_per_page, current_page * results_per_page)\r\n      renderList()\r\n    }\r\n    list?.scrollIntoView({ behavior: 'smooth' })\r\n  }\r\n\r\n  function handleNext() {\r\n    if (current_page < Math.ceil(filteredData!.length / results_per_page)) {\r\n      current_page++\r\n      paginatedData = filteredData!.slice((current_page - 1) * results_per_page, current_page * results_per_page)\r\n      renderList()\r\n    }\r\n    list?.scrollIntoView({ behavior: 'smooth' })\r\n  }\r\n\r\n  function setFilters() {\r\n    let filter_options = filters.map(filter => filter.name)\r\n\r\n    // set filters\r\n    apiData.forEach(item => {\r\n      let existing_department = filters[0].options.map(option => option)\r\n      let existing_location = filters[1].options.map(option => option)\r\n\r\n      // department\r\n      let department = item.departments[0].name\r\n      let location = item.location.name\r\n\r\n      // department\r\n      if (!existing_department.includes(department)) filters[0].options.push(item.departments[0].name)\r\n      // location\r\n      if (!existing_location.includes(location)) filters[1].options.push(item.location.name)\r\n    })\r\n\r\n    let filterElements = mainElement?.querySelectorAll('[tc-greenhouse-filter]') as NodeListOf<HTMLSelectElement>\r\n    console.log(filterElements, \"filterElements\")\r\n\r\n    if (filterElements?.length) filterElements.forEach(item => {\r\n\r\n      let filter_type = item.getAttribute('tc-greenhouse-filter') as string\r\n\r\n      if (filter_options.includes(filter_type)) { // check if valid filter\r\n        let options = filters.find(filter => filter.name === filter_type)?.options\r\n        if (options?.length) {\r\n          options.forEach(option => {\r\n            let newOption = document.createElement('option')\r\n            newOption.value = option\r\n            newOption.textContent = option\r\n            item.appendChild(newOption)\r\n          })\r\n        }\r\n      }\r\n\r\n      item.onchange = (e) => { handleFilterChange(e) }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  function handleFilterChange(e: Event) {\r\n\r\n    const locationFilter = document.querySelector('[tc-greenhouse-filter=\"location\"]') as HTMLSelectElement\r\n    const departmentFilter = document.querySelector('[tc-greenhouse-filter=\"department\"]') as HTMLSelectElement\r\n\r\n    let filteredData: job[] = []\r\n\r\n    if (locationFilter?.value && departmentFilter?.value) {\r\n\r\n      if (locationFilter.value === 'All Locations' && departmentFilter.value === 'All Departments') filteredData = apiData\r\n      else if (locationFilter.value === 'All Locations') {\r\n        apiData.forEach(item => {\r\n          if (item.departments[0].name === departmentFilter.value) {\r\n            filteredData.push(item)\r\n          }\r\n        })\r\n      } else if (departmentFilter.value === 'All Departments') {\r\n        apiData.forEach(item => {\r\n          if (item.location.name === locationFilter.value) {\r\n            filteredData.push(item)\r\n          }\r\n        })\r\n      } else {\r\n        apiData.forEach(item => {\r\n          if (item.departments[0].name === departmentFilter.value && item.location.name === locationFilter.value) {\r\n            filteredData.push(item)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    console.log(filteredData.length)\r\n    filteredData = filteredData\r\n    current_page = 1\r\n    setCurrentPageData()\r\n  }\r\n\r\n\r\n  async function getDataFromGreenhouseAPI() {\r\n\r\n    // fake await promise\r\n    // await new Promise(resolve => setTimeout(resolve, 5000)); // waits for 2 seconds\r\n\r\n    let res = await fetch(`https://boards-api.greenhouse.io/v1/boards/mural/jobs?content=true`, {\r\n      method: 'GET',\r\n    }).then(res => res.json()).catch(err => console.log(err))\r\n\r\n    apiData = res.jobs\r\n    filteredData = res.jobs\r\n    setCurrentPageData()\r\n  }\r\n};\r\n", "import { copyToClipboard } from '@utils/copyToClipboard';\r\nimport { greenhouse } from '@utils/greenhouse';\r\n\r\nwindow.Webflow ||= [];\r\n// window.Webflow.push(() => {\r\n//   greenhouse();\r\n//   // copyToClipboard();\r\n// });\r\n\r\n// for testing purposes\r\n\r\nwindow.onload = () => {\r\n  greenhouse()\r\n}"],
  "mappings": "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",
  "names": ["location", "filteredData", "res"]
}
